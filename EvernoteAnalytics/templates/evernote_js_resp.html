{% extends "base.html" %}
{{ credentials }}
{% block head %}
<link rel="stylesheet" href="{{ STATIC_URL }}amanda/gmaps.css" type="text/css" />
<script type="text/javascript" src="{{ STATIC_URL}}amanda/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript" src="http://twitter.github.com/bootstrap/assets/js/bootstrap-dropdown.js"></script>
{% endblock head %}

<!-- onload="openMap()" -->
{% block bodyOptions %} 
{% endblock bodyOptions %}
{% block body %}
<div class="container" style="margin-top:20px">
    <div class="row">
        <div class="span2" style="float: left">
            <div class="btn-group">
                <button class="btn dropdown-toggle" data-toggle="dropdown">
                    Action
                    <span class="caret"></span>
                </button>
                <ul class="dropdown-menu">
                    <li><a href="#">Action</a></li>
                    <li><a href="#">Another action</a></li>
                    <li><a href="#">Something else here</a></li>
                    <li><a href="#">Separated link</a></li>
                </ul>
            </div>
        </div>
        <div class="span8" style="float: right">

        <script type="text/javascript" src="{{ STATIC_URL}}js/googleBarGraph.js"></script>
            <script type="text/javascript">
               var dayCount = {{ dayFrequency|safe }};
               var days = Array(["Sunday",0],["Monday",0],["Tuesday",0],["Wednesday",0],["Thursday",0],["Friday",0],["Saturday",0]);
               $.each(dayCount, function(i,obj){
                  days[i][1] = obj;
               });
               drawBarGraph(days, 'Day', 'chart');
</script></div></div>
<div class="row">
    <div class="span12" style="background: #ffffff">
        <h2>Total Posts by Day</h2>
        <div id="chart"></div>
    </div>
</div>
<div class="row" style="">
    <div class="span5" style="text-align: center; margin-top: 10%; vertical-align: center">
        <script type="text/javascript" src="{{ STATIC_URL}}js/googlePieChart.js"></script>
        <script type="text/javascript">
     //     var guidMap = {% autoescape off %} {{ guidMap }} {% endautoescape %}
 //       $(document).ready(function() {
    //      var notebookCount = {% autoescape off %} {{ notebookFrequency }}
  //                        {% endautoescape %};
   //      });
   $(document).ready(function() {
     $.getJSON("{% url notebook_json %}",
        {username: "{{ user.username }}"},
         function(json){
          createPieChart(json['noteFrequency'], json['guidMap'], 
                         "Notebook", "chart_div");
        });
//      createPieChart(notebookCount, guidMap, "Notebook", "chart_div");
   });
        </script>
        <div class="span2" style="float: left">
            <div class="btn-group">
                <button class="btn dropdown-toggle" data-toggle="dropdown">
                    Action
                    <span class="caret"></span>
                </button>
                <ul class="dropdown-menu">
                    <li><a href="#">Action</a></li>
                    <li><a href="#">Another action</a></li>
                    <li><a href="#">Something else here</a></li>
                    <li><a href="#">Separated link</a></li>
                </ul>
            </div>
        </div>
        <div id="chart_div" style="width: 900px; height: 500px;border: 1px solid black;"></div>
    </div>
</div>
<div class="span2" style="float: left">
    <div class="btn-group">
        <button class="btn dropdown-toggle" data-toggle="dropdown">
            Action
            <span class="caret"></span>
        </button>
        <ul class="dropdown-menu">
            <li><a href="#">Action</a></li>
            <li><a href="#">Another action</a></li>
            <li><a href="#">Something else here</a></li>
            <li><a href="#">Separated link</a></li>
        </ul>
    </div>
</div>
<div class="span5" style="text-align: center; margin-left: auto; margin-right: auto;">
    <script type="text/javascript">
    $(document).ready(function() {
      createPieChart({{ tagFrequency|safe}}, {{ guidMap|safe }}, "Tag", "chart_div2");
    });
    </script>
    <div id="chart_div2" style="width: 900px; height: 500px;"></div>
</div>
<div class="row">
    <div class="span10" style="margin-top: 20px">
        <h2> Geotags of posts </h2>
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
        <div class="span2" style="float: left">
            <div class="btn-group">
                <button class="btn dropdown-toggle" data-toggle="dropdown">
                    Action
                    <span class="caret"></span>
                </button>
                <ul class="dropdown-menu">
                    <li><a href="#">Action</a></li>
                    <li><a href="#">Another action</a></li>
                    <li><a href="#">Something else here</a></li>
                    <li><a href="#">Separated link</a></li>
                </ul>
            </div>
        </div>
        <script type="text/javascript" src='{{ STATIC_URL }}/js/googleMapWindow.js'></script>
        <script type="text/javascript">
    $(document).ready(function() {
        var geoLocations = {{ geoLocations|safe }};
        var openMap = gmapsWindow(geoLocations, '{{ STATIC_URL }}amanda/evernote.jpg', 'map_canvas');
        openMap();
     });
        </script>
      <div id="map_canvas"></div>
      <div id="loc"></div>
    </div></div>
   </div>
   </div>
</div>
{% endblock body %}
